#!/bin/sh
#
# http://github.com/mitchweaver/bin
#
# firefox wrapper
#
# shellcheck disable=2086
#
# -*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*

export MOZ_ENABLE_WAYLAND=0

if command -v firefox >/dev/null 2>&1 ; then
	firefox=$(which firefox)
elif command -v firefox-bin >/dev/null 2>&1 ; then
	firefox=$(which firefox-bin)
else
	>&2 echo "install firefox idiot"
	exit 1
fi

def_opts="--setDefaultBrowser --no-remote --disable-pinch"

if [ "$1" ] ; then
	case $1 in
		-n)
			shift
			exec $firefox $def_opts --new-instance -- "$*"
			;;
		-p)
			shift
			exec $firefox $def_opts --new-instance --private-window -- "$*"
			;;
		*)
			$firefox $def_opts -- "$*"
	esac
else
	$firefox $def_opts
fi
